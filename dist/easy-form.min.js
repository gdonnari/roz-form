var Eaf=(()=>{var J=Object.create;var b=Object.defineProperty;var Q=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var W=Object.getPrototypeOf,X=Object.prototype.hasOwnProperty;var Y=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Z=(e,t)=>{for(var r in t)b(e,r,{get:t[r],enumerable:!0})},O=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of R(t))!X.call(e,a)&&a!==r&&b(e,a,{get:()=>t[a],enumerable:!(n=Q(t,a))||n.enumerable});return e};var f=(e,t,r)=>(r=e!=null?J(W(e)):{},O(t||!e||!e.__esModule?b(r,"default",{value:e,enumerable:!0}):r,e)),$=e=>O(b({},"__esModule",{value:!0}),e);var u=Y((ne,V)=>{V.exports=window.React});var re={};Z(re,{Datalist:()=>_,ErrorMessage:()=>z,Form:()=>w,Input:()=>A,Provider:()=>N,Select:()=>D,StateValue:()=>q,SubmitButton:()=>U,Textarea:()=>K});var h=f(u()),S=h.default.createContext(null);function s(e,t=!1){let r=h.default.useContext(S);return t?r[e][t]:r[e]}function d(e,t=""){let r=h.default.useContext(S),n=Object.assign({},r.state[e])??{};return n.value??=t,n.error??=!1,n}function ee(e){let t={};for(let r in e){let n=e[r];Array.isArray(n)&&(n=[...e[r]]),t[r]={value:n,error:!1}}return t}function te(e,t){let r={},n=Object.assign({},e[t.field])??{},a=n.value,i=-1,o=!1;switch(t.type){case"setValue":r[t.field]={value:t.data,error:!1};break;case"addValue":Array.isArray(n.value)?a=[...n.value]:a=[],i=a.indexOf(t.data),i===-1&&a.push(t.data),r[t.field]={value:a,error:!1};break;case"removeValue":Array.isArray(n.value)?a=[...n.value]:a=[],i=a.indexOf(t.data),i>-1&&a.splice(i,1),r[t.field]={value:a,error:!1};break;case"setError":let c=t.data;c===""&&(c=!1),r[t.field]=n,r[t.field].error=c;break;case"reset":return t.data;default:throw Error("Unknown action: "+t.type)}let l={...e,...r};for(let c in l)if(c!=="form"&&l[c].error){o=!0;break}return r.form={error:o},{...l,...r}}function g(e){let t=s("validate"),r=s("dispatch");function n(a){t&&r({type:"setError",field:a.target.name,data:a.target.validationMessage}),e&&e(a)}return n}function x(e,t=!1){let r=s("validate"),n=s("dispatch");function a(i){let o="setValue",l=i.target.value;switch(i.target.type){case"select-multiple":l=Array.from(i.target.selectedOptions,v=>v.value);break;case"checkbox":i.target.multiple?i.target.checked?o="addValue":o="removeValue":i.target.checked||(l="");break}n({type:o,field:i.target.name,data:l}),r&&t&&i.target.checkValidity()&&n({type:"setError",field:i.target.name,data:i.target.validationMessage}),e&&e(i)}return a}function F(e){let t=s("onBlurValidate"),r=s("validate"),n=s("dispatch");function a(i){r&&t&&i.target.checkValidity()&&n({type:"setError",field:i.target.name,data:i.target.validationMessage}),e&&e(i)}return a}function B(e){let t=s("validate");function r(n){if(n.preventDefault(),t&&!n.target.checkValidity())return!1;if(e)return e(n),!1;n.target.submit()}return r}function I(e){let t=s("dispatch"),r=s("initialState");function n(a){a.preventDefault(),t({type:"reset",data:r}),e&&e(a)}return n}function N(e){let t=ee(e.data),[r,n]=h.default.useReducer(te,t),a={initialState:t,state:r,dispatch:n,validate:e.validate??!0,onBlurValidate:e.onBlurValidate??!0,invalidClassName:e.invalidClassName??"easyform-invalid"};return h.default.createElement(S.Provider,{value:a},e.children)}var j=f(u());function w(e){let t=s("validate"),r=B(e.onSubmit),n=I(e.onReset),a=Object.assign({},e)??{};return a.onSubmit=r,a.onReset=n,delete a.children,t&&(a.noValidate=!0),j.default.createElement("form",{...a},e.children)}var k=f(u());function A(e){let t=x(e.onChange,e.validateOnChange),r=g(e.onInvalid),n=F(e.onBlur),a="";e.multiple&&(a=[]);let i=d(e.name,a),o=Object.assign({},e)??{};if(o.value??=i.value,e.type==="hidden")return k.default.createElement("input",{...o});o.onInvalid=r,o.onChange=t,o.onBlur=n,o.className??="",delete o.validateOnChange;let l=s("invalidClassName");i.error&&(o.className+=" "+l);function v(c){let G=c.length;for(let P=0;P<G;P++)if(e.value===c[P])return!0;return!1}return e.type==="checkbox"&&(e.multiple?(delete o.onBlur,o.checked=v(i.value)):o.checked=e.value===i.value),e.type==="radio"&&(delete o.onBlur,o.checked=e.value===i.value),k.default.createElement("input",{...o})}var y=f(u());var M=f(u());var H=f(u());function E(e){let t=Object.assign({},e)??{};return delete t.text,e.text?H.default.createElement("option",{...t},e.text):H.default.createElement("option",{...t})}function p(e){let t=[];return e.options&&(t=e.options.map(function(r,n){let a=Object.assign({},r);return a.key=n,M.default.createElement(E,{...a})})),t}function D(e){let t=x(e.onChange),r=g(e.onInvalid),n=F(e.onBlur),a="";e.multiple&&(a=[]);let i=d(e.name,a),o=i.value;e.multiple&&!Array.isArray(i.value)&&(o=[]);let l=Object.assign({},e)??{};l.onChange=t,l.onInvalid=r,l.onBlur=n,l.value??=o,l.className??="";let v=s("invalidClassName");return i.error&&(l.className+=" "+v),e.options?(delete l.options,y.default.createElement("select",{...l},y.default.createElement(p,{options:e.options}))):(delete l.children,y.default.createElement("select",{...l},e.children))}var L=f(u());function K(e){let t=x(e.onChange),r=g(e.onInvalid),n=F(e.onBlur),a=d(e.name),i=Object.assign({},e)??{};i.onChange=t,i.onInvalid=r,i.onBlur=n,i.value??=a.value,i.className??="";let o=s("invalidClassName");return a.error&&(i.className+=" "+o),L.default.createElement("textarea",{...i})}var T=f(u());function U(e){let t=d("form"),r=Object.assign({},e)??{};return r.type??="submit",r.disabled=t.error,delete r.children,T.default.createElement("button",{...r},e.children)}var C=f(u());function _(e){let t=Object.assign({},e)??{};return t.id??=e.name,e.options?(delete t.options,C.default.createElement("datalist",{...t},C.default.createElement(p,{options:e.options}))):(delete t.children,C.default.createElement("datalist",{...t},e.children))}function q(e){let t=d(e.forInput);return typeof e.display=="function"?e.display(t.value):t.value}function z(e){return d(e.forInput).error}return $(re);})();
//# sourceMappingURL=easy-form.min.js.map
