var Eaf=(()=>{var R=Object.create;var P=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var X=Object.getOwnPropertyNames;var Y=Object.getPrototypeOf,Z=Object.prototype.hasOwnProperty;var $=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ee=(e,t)=>{for(var a in t)P(e,a,{get:t[a],enumerable:!0})},O=(e,t,a,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of X(t))!Z.call(e,r)&&r!==a&&P(e,r,{get:()=>t[r],enumerable:!(n=W(t,r))||n.enumerable});return e};var v=(e,t,a)=>(a=e!=null?R(Y(e)):{},O(t||!e||!e.__esModule?P(a,"default",{value:e,enumerable:!0}):a,e)),te=e=>O(P({},"__esModule",{value:!0}),e);var m=$((le,I)=>{I.exports=window.React});var ie={};ee(ie,{Button:()=>q,Datalist:()=>z,ErrorMessage:()=>J,Form:()=>M,FormProvider:()=>w,Input:()=>D,Select:()=>K,StateValue:()=>G,Textarea:()=>_});var x=v(m()),V=x.default.createContext(null);function u(e,t=!1){let a=x.default.useContext(V);return t?a[e][t]:a[e]}function f(e,t=""){let n={...x.default.useContext(V).state[e]};return n.value??=t,n.error??=!1,n}function re(e){let t={};for(let a in e){let n=e[a];Array.isArray(n)&&(n=[...e[a]]),t[a]={value:n,error:!1}}return t}function ae(e,t){let a={},n={...e[t.field]},r=n.value,l=-1,s=!1;switch(t.type){case"setValue":a[t.field]={value:t.data,error:!1};break;case"addValue":Array.isArray(n.value)?r=[...n.value]:r=[],l=r.indexOf(t.data),l===-1&&r.push(t.data),a[t.field]={value:r,error:!1};break;case"removeValue":Array.isArray(n.value)?r=[...n.value]:r=[],l=r.indexOf(t.data),l>-1&&r.splice(l,1),a[t.field]={value:r,error:!1};break;case"setError":let i=t.data;i===""&&(i=!1),a[t.field]=n,a[t.field].error=i;break;case"reset":return t.data;default:throw Error("Unknown action: "+t.type)}let d={...e,...a};for(let i in d)if(i!=="form"&&d[i].error){s=!0;break}return a.form={error:s},{...d,...a}}function g(e,t){let a=u("dispatch");function n(r){t&&a({type:"setError",field:r.target.name,data:r.target.validationMessage}),e&&e(r)}return n}function F(e,t){let a=u("dispatch");function n(r){let l="setValue",s=r.target.value;switch(r.target.type){case"select-multiple":s=Array.from(r.target.selectedOptions,d=>d.value);break;case"checkbox":r.target.multiple?r.target.checked?l="addValue":l="removeValue":r.target.checked||(s="");break}a({type:l,field:r.target.name,data:s}),t&&r.target.checkValidity()&&a({type:"setError",field:r.target.name,data:r.target.validationMessage}),e&&e(r)}return n}function C(e,t){let a=u("dispatch");function n(r){t&&r.target.checkValidity()&&a({type:"setError",field:r.target.name,data:r.target.validationMessage}),e&&e(r)}return n}function N(e){let t=u("validate");function a(n){if(n.preventDefault(),t&&!n.target.checkValidity())return!1;if(e)return e(n),!1;n.target.submit()}return a}function A(e){let t=u("dispatch"),a=u("initialState");function n(r){r.preventDefault(),t({type:"reset",data:a}),e&&e(r)}return n}function ne(e){return{...{validate:!0,onBlurValidate:!0,onChangeValidate:!1,invalidClassName:"easyform-invalid"},...e}}function w(e){let t=ne(e.validation),a=re(e.data),[n,r]=x.default.useReducer(ae,a),l={initialState:a,state:n,dispatch:r,validation:t};return x.default.createElement(V.Provider,{value:l},e.children)}var E=v(m());function M(e){let t=u("validation"),a=N(e.onSubmit),n=A(e.onReset),r={...e};return r.onSubmit=a,r.onReset=n,delete r.children,t.validate&&(r.noValidate=!0),E.default.createElement("form",{...r},e.children)}var H=v(m());function D(e){let t=u("validation"),a=e.validateOnBlur??(t.validate&&t.onBlurValidate),n=e.validateOnChange??(t.validate&&t.onChangeValidate),r=C(e.onBlur,a),l=F(e.onChange,n),s=g(e.onInvalid,t.validate),d="";e.multiple&&(d=[]);let o=f(e.name,d),i={...e};if(i.value??=o.value,e.type==="hidden")return H.default.createElement("input",{...i});i.onInvalid=s,i.onChange=l,i.onBlur=r,i.className??="",delete i.validateOnChange,o.error&&(i.className+=" "+t.invalidClassName);function c(p){let Q=p.length;for(let b=0;b<Q;b++)if(e.value===p[b])return!0;return!1}return e.type==="checkbox"&&(e.multiple?(delete i.onBlur,i.checked=c(o.value)):i.checked=e.value===o.value),e.type==="radio"&&(delete i.onBlur,i.checked=e.value===o.value),H.default.createElement("input",{...i})}var B=v(m());var T=v(m());var k=v(m());function L(e){let t={...e};return delete t.text,e.text?k.default.createElement("option",{...t},e.text):k.default.createElement("option",{...t})}function y(e){let t=[];return e.options&&(t=e.options.map(function(a,n){let r={...a};return r.key=n,T.default.createElement(L,{...r})})),t}function K(e){let t=u("validation"),a=e.validateOnBlur??(t.validate&&t.onBlurValidate),n=e.validateOnChange??(t.validate&&t.onChangeValidate),r=C(e.onBlur,a),l=F(e.onChange,n),s=g(e.onInvalid,t.validate),d="";e.multiple&&(d=[]);let o=f(e.name,d),i=o.value;e.multiple&&!Array.isArray(o.value)&&(i=[]);let c={...e};return c.onChange=l,c.onInvalid=s,c.onBlur=r,c.value??=i,c.className??="",o.error&&(c.className+=" "+t.invalidClassName),e.options?(delete c.options,B.default.createElement("select",{...c},B.default.createElement(y,{options:e.options}))):(delete c.children,B.default.createElement("select",{...c},e.children))}var U=v(m());function _(e){let t=u("validation"),a=e.validateOnBlur??(t.validate&&t.onBlurValidate),n=e.validateOnChange??(t.validate&&t.onChangeValidate),r=C(e.onBlur,a),l=F(e.onChange,n),s=g(e.onInvalid,t.validate),d=f(e.name),o={...e};return o.onChange=l,o.onInvalid=s,o.onBlur=r,o.value??=d.value,o.className??="",d.error&&(o.className+=" "+t.invalidClassName),U.default.createElement("textarea",{...o})}var j=v(m());function q(e){let t=f("form"),a={...e};return delete a.children,e.disabled==="formState"&&(a.disabled=t.error),j.default.createElement("button",{...a},e.children)}var S=v(m());function z(e){let t={...e};return t.id??=e.name,e.options?(delete t.options,S.default.createElement("datalist",{...t},S.default.createElement(y,{options:e.options}))):(delete t.children,S.default.createElement("datalist",{...t},e.children))}function G(e){let t=f(e.forInput);return typeof e.display=="function"?e.display(t.value):t.value}function J(e){return f(e.forInput).error}return te(ie);})();
//# sourceMappingURL=easy-form.min.js.map
