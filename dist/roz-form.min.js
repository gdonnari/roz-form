var Roz=(()=>{var W=Object.create;var P=Object.defineProperty;var X=Object.getOwnPropertyDescriptor;var Y=Object.getOwnPropertyNames;var Z=Object.getPrototypeOf,$=Object.prototype.hasOwnProperty;var ee=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),te=(e,t)=>{for(var r in t)P(e,r,{get:t[r],enumerable:!0})},I=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Y(t))!$.call(e,a)&&a!==r&&P(e,a,{get:()=>t[a],enumerable:!(n=X(t,a))||n.enumerable});return e};var v=(e,t,r)=>(r=e!=null?W(Z(e)):{},I(t||!e||!e.__esModule?P(r,"default",{value:e,enumerable:!0}):r,e)),ae=e=>I(P({},"__esModule",{value:!0}),e);var m=ee((de,w)=>{w.exports=window.React});var oe={};te(oe,{Button:()=>_,Datalist:()=>j,ErrorMessage:()=>J,Form:()=>D,FormProvider:()=>A,Input:()=>z,Select:()=>R,StateValue:()=>G,Textarea:()=>K});var x=v(m()),H=x.default.createContext(null);function u(e,t=!1){let r=x.default.useContext(H);return t?r[e][t]:r[e]}function c(e,t=""){let n={...x.default.useContext(H).state[e]};return n.value??=t,n.error??=!1,n}function re(e){let t={};for(let r in e){let n=e[r];Array.isArray(n)&&(n=[...e[r]]),t[r]={value:n,error:!1}}return t}function ne(e,t){let r={},n={...e[t.field]},a=n.value,o=-1,f=!1;switch(t.type){case"setValue":r[t.field]={value:t.data,error:!1};break;case"addValue":Array.isArray(n.value)?a=[...n.value]:a=[],o=a.indexOf(t.data),o===-1&&a.push(t.data),r[t.field]={value:a,error:!1};break;case"removeValue":Array.isArray(n.value)?a=[...n.value]:a=[],o=a.indexOf(t.data),o>-1&&a.splice(o,1),r[t.field]={value:a,error:!1};break;case"setError":let l=t.data;l===""&&(l=!1),r[t.field]=n,r[t.field].error=l;break;case"reset":return t.data;default:throw Error("Unknown action: "+t.type)}let s={...e,...r};for(let l in s)if(l!=="form"&&s[l].error){f=!0;break}return r.form={error:f},{...s,...r}}function g(e,t){let r=u("dispatch");function n(a){t&&r({type:"setError",field:a.target.name,data:a.target.validationMessage}),e&&e(a)}return n}function C(e,t){let r=u("dispatch");function n(a){let o="setValue",f=a.target.value;switch(a.target.type){case"select-multiple":f=Array.from(a.target.selectedOptions,s=>s.value);break;case"checkbox":a.target.multiple?a.target.checked?o="addValue":o="removeValue":a.target.checked||(f="");break}r({type:o,field:a.target.name,data:f}),t&&a.target.checkValidity()&&r({type:"setError",field:a.target.name,data:a.target.validationMessage}),e&&e(a)}return n}function F(e,t){let r=u("dispatch");function n(a){t&&a.target.checkValidity()&&r({type:"setError",field:a.target.name,data:a.target.validationMessage}),e&&e(a)}return n}function p(e){let t=u("validate");function r(n){if(n.preventDefault(),t&&!n.target.checkValidity())return!1;if(e)return e(n),!1;n.target.submit()}return r}function E(e){let t=u("dispatch"),r=u("initialState");function n(a){a.preventDefault(),t({type:"reset",data:r}),e&&e(a)}return n}function ie(e){return{...{validate:!0,onBlurValidate:!0,onChangeValidate:!1,invalidClassName:"roz-invalid"},...e}}function A(e){let t=ie(e.validation),r=re(e.data),[n,a]=x.default.useReducer(ne,r),o={initialState:r,state:n,dispatch:a,validation:t};return x.default.createElement(H.Provider,{value:o},e.children)}var M=v(m());function D(e){let t=u("validation"),r=p(e.onSubmit),n=E(e.onReset),a={...e};return a.onSubmit=r,a.onReset=n,delete a.children,t.validate&&(a.noValidate=!0),M.default.createElement("form",{...a},e.children)}var O=v(m());function z(e){if(!e.name)throw Error("Roz requires to set a name attribute for each managed input. Please review your form inputs.");let t=u("validation"),r=!0;(e.type==="checkbox"||e.type==="radio")&&(r=!1);let n=e.validateOnBlur??(t.validate&&t.onBlurValidate&&r),a=e.validateOnChange??(t.validate&&t.onChangeValidate),o=F(e.onBlur,n),f=C(e.onChange,a),s=g(e.onInvalid,t.validate),d="";e.multiple&&(d=[]);let l=c(e.name,d),i={...e};if(i.value??=l.value,e.type==="hidden")return O.default.createElement("input",{...i});if(i.onInvalid=s,i.onChange=f,i.onBlur=o,i.className??="",delete i.validateOnChange,delete i.invalidClassName,l.error){let y=e.invalidClassName??t.invalidClassName;i.className+=" "+y}function k(y){let Q=y.length;for(let B=0;B<Q;B++)if(e.value===y[B])return!0;return!1}return e.type==="checkbox"&&(e.multiple?i.checked=k(l.value):i.checked=e.value===l.value),e.type==="radio"&&(i.checked=e.value===l.value),O.default.createElement("input",{...i})}var S=v(m());var L=v(m());var N=v(m());function q(e){let t={...e};return delete t.text,e.text?N.default.createElement("option",{...t},e.text):N.default.createElement("option",{...t})}function b(e){let t=[];return e.options&&(t=e.options.map(function(r,n){let a={...r};return a.key=n,L.default.createElement(q,{...a})})),t}function R(e){if(!e.name)throw Error("Roz requires to set a name attribute for each managed input. Please review your form inputs.");let t=u("validation"),r=e.validateOnBlur??(t.validate&&t.onBlurValidate),n=e.validateOnChange??(t.validate&&t.onChangeValidate),a=F(e.onBlur,r),o=C(e.onChange,n),f=g(e.onInvalid,t.validate),s="";e.multiple&&(s=[]);let d=c(e.name,s),l=d.value;e.multiple&&!Array.isArray(d.value)&&(l=[]);let i={...e};if(i.onChange=o,i.onInvalid=f,i.onBlur=a,i.value??=l,i.className??="",delete i.invalidClassName,d.error){let k=e.invalidClassName??t.invalidClassName;i.className+=" "+k}return e.options?(delete i.options,S.default.createElement("select",{...i},S.default.createElement(b,{options:e.options}))):(delete i.children,S.default.createElement("select",{...i},e.children))}var T=v(m());function K(e){if(!e.name)throw Error("Roz requires to set a name attribute for each managed input. Please review your form inputs.");let t=u("validation"),r=e.validateOnBlur??(t.validate&&t.onBlurValidate),n=e.validateOnChange??(t.validate&&t.onChangeValidate),a=F(e.onBlur,r),o=C(e.onChange,n),f=g(e.onInvalid,t.validate),s=c(e.name),d={...e};if(d.onChange=o,d.onInvalid=f,d.onBlur=a,d.value??=s.value,d.className??="",delete d.invalidClassName,s.error){let l=e.invalidClassName??t.invalidClassName;d.className+=" "+l}return T.default.createElement("textarea",{...d})}var U=v(m());function _(e){let t=c("form"),r={...e};return delete r.children,e.disabled==="formState"&&(r.disabled=t.error),U.default.createElement("button",{...r},e.children)}var V=v(m());function j(e){let t={...e};return t.id??=e.name,e.options?(delete t.options,V.default.createElement("datalist",{...t},V.default.createElement(b,{options:e.options}))):(delete t.children,V.default.createElement("datalist",{...t},e.children))}function G(e){let t=c(e.forInput);return typeof e.display=="function"?e.display(t.value):t.value}function J(e){let t=c(e.forInput);return typeof e.display=="function"?e.display(e.forInput,t.error):t.error}return ae(oe);})();
//# sourceMappingURL=roz-form.min.js.map
